@page "/departments"
@page "/departments/index"

@layout AdminLayout

<h3>Departments</h3>

@if (Departments == null || Departments.Count == 0)
{
    <p>No departments available.</p>
}
else
{
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-sm">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var department in Departments)
                {
                    <tr>
                        <td>@department.Name</td>
                        <td>@(department.IsDeleted ? "Deleted" : "Active")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

@code {
    private List<DepartmentListModel> Departments { get; set; } = new();

    protected override void OnInitialized()
    {
        Departments = new List<DepartmentListModel>
        {
            new DepartmentListModel
            {
                DepartmentId = DepartmentId.Create(Guid.NewGuid()),
                Name = "Human Resources",
                TenantId = Guid.NewGuid(),
                IsDeleted = false
            },
            new DepartmentListModel
            {
                DepartmentId = DepartmentId.Create(Guid.NewGuid()),
                Name = "Finance",
                TenantId = Guid.NewGuid(),
                IsDeleted = false
            },
            new DepartmentListModel
            {
                DepartmentId = DepartmentId.Create(Guid.NewGuid()),
                Name = "IT",
                TenantId = Guid.NewGuid(),
                IsDeleted = true
            }
        };
    }
}
